<!doctype html>
  <head>
  	<meta charset="utf-8">
  	<meta name="viewport" content="initial-scale=1.0">
    <title>Interactive Timeline</title>
    <link rel="stylesheet" href="assets/css/amoskeag.css" media="screen" />
    <script src="assets/js/jquery-3.3.1.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHL6eTIBUtTV2F91hgpXWkF1MdkQdbR_g"></script>
    <script>
      var map;
      var dateOverlays = new Map()
      dateOverlays.set(1868, {"img": "", "bounds": new google.maps.LatLngBounds(
          new google.maps.LatLng(42.98235, -71.47152),
          new google.maps.LatLng(43.00393, -71.46373)
        )})
      dateOverlays.set(1892, 
        {"img":"/assets/img/Manchester 1892.png", "bounds": new google.maps.LatLngBounds(
          new google.maps.LatLng(42.98235, -71.47152),
          new google.maps.LatLng(43.00393, -71.46373)
        )});
      dateOverlays.set(1966, {"img": "", "bounds": new google.maps.LatLngBounds(
          new google.maps.LatLng(42.98235, -71.47152),
          new google.maps.LatLng(43.00393, -71.46373)
        )})
      dateOverlays.set(1972, {"img": "", "bounds": new google.maps.LatLngBounds(
          new google.maps.LatLng(42.98235, -71.47152),
          new google.maps.LatLng(43.00393, -71.46373)
        )})

      function selectDate(hashDate) {
        $("ul#dates>li>div.selected").removeClass("selected")
        $("ul#dates div:has(a[href='" + hashDate + "'])").addClass("selected")
      }

      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 42.993735, lng: -71.467577},
          zoom: 16,
          disableDefaultUI: true,
          styles: [
            {
              "featureType": "landscape.natural",
              "elementType": "geometry",
              "stylers": [
                {
                  "color": "#dfd2ae"
                }
              ]
            },
            {
              "featureType": "poi",
              "elementType": "labels.icon",
              "stylers": [
                {
                  "visibility": "off"
                }
              ]
            },
            {
              "featureType": "poi.park",
              "elementType": "geometry.fill",
              "stylers": [
                {
                  "color": "#a5b076"
                }
              ]
            },
            {
              "featureType": "poi.park",
              "elementType": "labels.text.fill",
              "stylers": [
                {
                  "color": "#447530"
                }
              ]
            },
            {
              "featureType": "road",
              "elementType": "labels.icon",
              "stylers": [
                {
                  "visibility": "off"
                }
              ]
            },
            {
              "featureType": "transit.station.bus",
              "elementType": "labels.icon",
              "stylers": [
                {
                  "visibility": "off"
                }
              ]
            },
            {
              "featureType": "water",
              "elementType": "geometry.fill",
              "stylers": [
                {
                  "color": "#b9d3dc"
                }
              ]
            },
            {
              "featureType": "water",
              "elementType": "labels.text.fill",
              "stylers": [
                {
                  "color": "#92998d"
                }
              ]
            }
          ]
        });
      }
      google.maps.event.addDomListener(window, 'load', initMap);

      $( document ).ready(function() {

        var dateIter = dateOverlays.keys();
        var nextDate = dateIter.next();
        while (!nextDate.done) {
          $('<li><div><a href="#' + nextDate.value + '">' + nextDate.value + '</a></div></li>').insertBefore($("ul#dates li:has(div.selected)"));
          nextDate = dateIter.next();
        }

        // Date has already been selected
        var urlFragment = window.location.hash
        if (urlFragment) {
          selectDate(urlFragment);
        }

        $("div.map").click(function() {
          $("div.satellite").removeClass("selected");
          $("div.map").addClass("selected");
          map.setMapTypeId("roadmap");
        });

        $("div.satellite").click(function() {
          $("div.map").removeClass("selected");
          $("div.satellite").addClass("selected");
          map.setMapTypeId("satellite");
        });

        $("div.increase_zoom").click(function() {
          var zoom = map.getZoom();
          map.setZoom(zoom + 1);
        });

        $("div.decrease_zoom").click(function() {
          var zoom = map.getZoom();
          map.setZoom(zoom - 1);
        });

        $("div#expand").click(function() {
          $("div#timeline").animate({
             left: '0'
          });
          $("div#expand_collapse").animate({
            left: '175px'
          });
        });

        $("div#collapse").click(function() {
          $("div#timeline").animate({
             left: '-175px'
          });
          $("div#expand_collapse").animate({
            left: '0'
          });
        })
      });

    </script>
  </head>
  <body>
    <div id="map"></div>
    <div id="timeline">
      <div id="map_controls">
        <div id="map_type" class="map_control_row">
          <div class="selected map"><a>Map</a></div>
          <div class="satellite"><a>Sat</a></div>
        </div>
        <div id="zoom" class="map_control_row">
          <div class="increase_zoom"><a>+</a></div>
          <div class="decrease_zoom"><a>-</a></div>
        </div>
      </div>
      <div>
    	  <ul id="dates">
    		  <li><div class="selected"><a href="#Present">Present</a></div></li>
    	  </ul>
      </div>
    </div>
    <div id="expand_collapse">
      <div id="expand"></div>
      <div id="collapse"></div>
    </div>
  </body>
</html>